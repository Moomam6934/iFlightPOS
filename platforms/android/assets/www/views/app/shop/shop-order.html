<ion-view view-title="Shop" data-ng-init="loadData()" hide-back-button="true">
    <!--     <ion-nav-title>
        <ione-popover title="Products" subtitle="change order" listmodel="products" templateurl='views/app/shop/shop-popover.html' on-selected="onSelect">
        </ione-popover>
    </ion-nav-title> -->
    <ion-nav-buttons side="left">
        <button class="button button-icon button-clear ion-navicon" ng-click="showActionSheet(true)">
        </button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
        <button class="button button-clear button-light" ng-disabled="iFlightData.products.length == 0" ng-click="checkoutProduct(iFlightData)"><b>Orders</b></button>
    </ion-nav-buttons>
    <ion-content overflow-scroll="true" has-bouncing="true">
        <ion-slide-box slide-tabs-scrollable="true" show-pager="false" ion-slide-tabs on-slide-changed="slideHasChanged($index)">
            <ion-slide ion-slide-tab-label="{{item.category_name}}" ng-repeat="item in products.data">
                <ion-scroll direction="y" style="height:90%;">
                    <div class="row shop-products-narrow-cards-outer">
                        <div ng-repeat="product in item.products" class="col col-33 shop-product-narrow-card item-product" ng-click="select_item(product)" on-hold="onHold(product)">
                            <!-- ui-sref="app.product-detail({productId: product._id})" -->
                            <div ng-class="{selected: isSelected.indexOf(product.products_id) != -1}">
                                <div class="list card">
                                    <div class="item item-image">
                                        <span class="badge badge-balanced select-item-shopgreen">{{product.total_qty}}</span>
                                        <span class="badge badge-balanced cart-item-shopgreen">{{product.cart.class_name}}</span>
                                        <pre-img ratio="_1_1" helper-class="main-image">
                                            <img ng-src="{{product.img}}" spinner-on-load>
                                            <img src="img/shopping-cart.png" style="width:35px;height:35px;margin-top:25px;">
                                        </pre-img>
                                    </div>
                                    <div class="item item-body">
                                        <h2 class="card-title">{{product.name}}</h2>
                                        <p class="card-description"><b>à¸¿ {{product.price}}</b></p>
                                        <div ng-repeat="itm in iFlightData.products" ng-show="itm.qty > 0 && itm.products_id === product.products_id">
                                            <span class="badge badge-assertive select-item-shop">{{itm.qty}}</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </ion-scroll>
            </ion-slide>
        </ion-slide-box>
    </ion-content>
</ion-view>
